<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Apply as a University Student - CMTA Intake 2K24">
    <meta name="author" content="W.M. Tharusha Dewmith">
    <title>Apply as a University Student - Ceylon Music Therapy Association - CMTA - LKMTA - 2K24</title>

    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" type="image/x-icon" href="images/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="72x72" href="images/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="114x114"
        href="images/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="144x144"
        href="images/apple-touch-icon-144x144-precomposed.png">

    <link href="https://fonts.googleapis.com/css?family=Work+Sans:400,500,600" rel="stylesheet">

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/menu.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/vendors.css" rel="stylesheet">

    <link href="css/custom.css" rel="stylesheet">

    <script src="js/modernizr.js"></script>

</head>

<body>

    <div id="preloader">
        <div data-loader="circle-side"></div>
    </div>
    <div id="loader_form">
        <div data-loader="circle-side-2"></div>
    </div>
    <nav>
        <ul class="cd-primary-nav">
            <li><a href="https://www.cmta.org.lk" class="animated_link">Main Site</a></li>
            <li><a href="https://gallery.lkmta.site" class="animated_link">Gallery</a></li>
            <li><a href="about.html" class="animated_link">About Us</a></li>
            <li><a href="contacts.html" class="animated_link">Contact Us</a></li>
        </ul>
    </nav>

    <div class="container-fluid full-height">
        <div class="row row-height">
            <div class="col-lg-6 content-left">
                <div class="content-left-wrapper">
                    <a href="index.html" id="logo"><img src="images/logo.png" alt="" width="49" height="35"></a>
                    <div id="social">
                        <ul>
                            <li><a href="#0"><i class="bi bi-facebook"></i></a></li>
                            <li><a href="#0"><i class="bi bi-twitter-x"></i></a></li>
                            <li><a href="#0"><i class="bi bi-instagram"></i></a></li>
                            <li><a href="#0"><i class="bi bi-tiktok"></i></a></li>
                        </ul>
                    </div>
                    <div>
                        <figure><img src="images/info_graphic_2.svg" alt="" class="img-fluid"></figure>
                        <h2>Ceylon Music Therapy Association</h2>
                        CHECK 2
                        <a href="https://cmta.org.lk/" class="btn_1 rounded" target="_parent">Visit Our Official
                            Website</a>
                        <a href="#start" class="btn_1 rounded mobile_btn">Start Now!</a>
                    </div>
                    <div class="copy">Â© Ceylon Music Therapy Association</div>
                </div>
            </div>
            <div class="col-lg-6 content-right" id="start">
                <div id="wizard_container">
                    <div id="top-wizard">
                        <div id="progressbar"></div>
                    </div>
                    <form id="myForm" action="/submit-form" method="post" enctype="multipart/form-data">
                        <input id="website" name="website" type="text" value="">
                        <div id="middle-wizard">
                            <div class="step">
                                <h3 class="main_question"><strong>1/5</strong>Basic Information</h3>
                                <div class="form-group">
                                    <input type="text" name="full_name" class="form-control required"
                                        placeholder="Full Name" onchange="getVals(this, 'full_name');">
                                </div>
                                <div class="form-group">
                                    <input type="date" name="date_of_birth" class="form-control required"
                                        placeholder="Date of Birth" onchange="getVals(this, 'date_of_birth');">
                                </div>
                                <div class="form-group">
                                    <div class="styled-select clearfix">
                                        <select class="wide required" name="gender" placeholder="Gender"
                                            onchange="getVals(this, 'gender');">
                                            <option value="">Select your gender</option>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <input type="text" name="phone_number" class="form-control required"
                                        placeholder="Phone Number" onchange="getVals(this, 'phone_number');">
                                </div>
                                <div class="form-group">
                                    <input type="email" name="email" class="form-control required"
                                        placeholder="Your Email" onchange="getVals(this, 'email');">
                                </div>
                                <div class="form-group">
                                    <input type="text" name="residential_address" class="form-control required"
                                        placeholder="Residential Address"
                                        onchange="getVals(this, 'residential_address');">
                                </div>
                                <div class="form-group">
                                    <input type="text" name="nic_no" class="form-control required"
                                        placeholder="National Identity Number" onchange="getVals(this, 'nic_no');">
                                </div>
                            </div>
                            <div class="step">
                                <h3 class="main_question"><strong>2/5</strong>Educational & Professional Qualifications
                                </h3>

                                <div class="form-group">
                                    <textarea name="qual"
                                        style="width: calc(100% - 20px); max-width: 500px; height: 150px; border: 2px solid #6495ED; border-radius: 10px; padding: 10px; background-color: #f0f8ff; color: #333; font-size: 16px; box-sizing: border-box; transition: border-color 0.3s ease; resize: vertical;"
                                        placeholder="List your most recent degrees, diplomas, certificates, and other qualifications (multiple lines allowed)"
                                        onchange="getVals(this, 'qual');"
                                        onfocus="this.style.outline='none'; this.style.borderColor='#4169E1';"
                                        onblur="this.style.borderColor='#6495ED';">
                                    </textarea>
                                    <script>
                                        document.addEventListener("DOMContentLoaded", function () {
                                            let textarea = document.querySelector("textarea[name='qual']");
                                            if (textarea.value.trim() === "") {
                                                textarea.value = ""; // Ensure it's empty
                                            }
                                        });
                                    </script>

                                </div>
                            </div>
                            <div class="step">
                                <h3 class="main_question"><strong>3/5</strong>Work Experiance</h3>
                                <textarea name="work"
                                    style="width: calc(100% - 20px); max-width: 500px; height: 150px; border: 2px solid #6495ED; border-radius: 10px; padding: 10px; background-color: #f0f8ff; color: #333; font-size: 16px; box-sizing: border-box; transition: border-color 0.3s ease; resize: vertical;"
                                    placeholder="List your previous jobs, projects, and services provided in organizations"
                                    onchange="getVals(this, 'work');"
                                    onfocus="this.style.outline='none'; this.style.borderColor='#4169E1';"
                                    onblur="this.style.borderColor='#6495ED';">
                                    </textarea>
                                <script>
                                    document.addEventListener("DOMContentLoaded", function () {
                                        let textarea = document.querySelector("textarea[name='work']");
                                        if (textarea.value.trim() === "") {
                                            textarea.value = ""; // Ensure it's empty
                                        }
                                    });
                                </script>

                            </div>
                            <div class="step">
                                <h3 class="main_question"><strong>4/5</strong>Skills and Abilities</h3>
                                <div class="form-group">
                                    <label class="container_check" for="leadership">Leadership
                                        <input type="checkbox" id="leadership" name="skills[]" value="Leadership"
                                            onchange="getVals(this, 'skills');">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container_check" for="communication">Communication and People
                                        Management
                                        <input type="checkbox" id="communication" name="skills[]"
                                            value="Communication and People Management"
                                            onchange="getVals(this, 'skills');">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container_check" for="music">Knowledge of Music and Music Therapy
                                        <input type="checkbox" id="music" name="skills[]"
                                            value="Music and Music Therapy" onchange="getVals(this, 'skills');">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container_check" for="it">Information Technology (IT) and Business
                                        Management
                                        <input type="checkbox" id="it" name="skills[]"
                                            value="IT and Business Management" onchange="getVals(this, 'skills');">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container_check" for="creativity">Creativity and Innovation Skills
                                        <input type="checkbox" id="creativity" name="skills[]"
                                            value="Creativity and Innovation" onchange="getVals(this, 'skills');">
                                        <span class="checkmark"></span>
                                    </label>
                                    <div class="form-group">
                                        <input type="text" id="other_skills" name="other_skills" class="form-control"
                                            placeholder="Other Skills" onchange="getVals(this, 'other_skills');">
                                    </div>
                                </div>

                            </div>
                            <div class="submit step">
                                <h3 class="main_question"><strong>5/5</strong>Consent and Summary</h3>
                                <div class="form-group terms">
                                    <label class="container_check">I agree to abide by CMTAâs policies and
                                        guidelines.
                                        <input type="checkbox" name="consent_policies" value="Yes" class="required"
                                            onchange="getVals(this, 'consent_policies');">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                                <div class="form-group terms">
                                    <label class="container_check">I grant permission to use photos/videos taken
                                        during CMTA events for promotional purposes.
                                        <input type="checkbox" name="consent_photos" value="Yes"
                                            onchange="getVals(this, 'consent_photos');">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="container_check">I hereby submit this application.
                                        <input type="checkbox" name="digital_signature" value="Yes" class="required"
                                            onchange="getVals(this, 'digital_signature');">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                                <div class="summary">
                                    <ul>
                                        <li>
                                            <ul>
                                                <li><label>Full Name</label>: <span id="full_name_summary"></span>
                                                </li>
                                                <li><label>Date of Birth</label>: <span
                                                        id="date_of_birth_summary"></span>
                                                </li>
                                                <li><label>Gender</label>: <span id="gender_summary"></span>
                                                </li>
                                                <li><label>Phone Number</label>: <span id="phone_number_summary"></span>
                                                </li>
                                                <li><label>Email</label>: <span id="email_summary"></span>
                                                </li>
                                                <li><label>Residential Address</label>: <span
                                                        id="residential_address_summary"></span>
                                                </li>
                                                <li><label>National Identity Number</label>: <span
                                                        id="nic_no_summary"></span>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div id="bottom-wizard">
                            <button type="button" name="backward" class="backward">Prev</button>
                            <button type="button" name="forward" class="forward">Next</button>
                            <button type="submit" name="process" class="submit" data-bs-toggle="modal"
                                data-bs-target="#successModal">Submit</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="cd-overlay-nav">
        <span></span>
    </div>
    <div class="cd-overlay-content">
        <span></span>
    </div>
    <a href="#0" class="cd-nav-trigger">Menu<span class="cd-icon"></span></a>



    <script src="js/jquery-3.7.1.min.js"></script>
    <script src="js/common_scripts.min.js"></script>
    <script src="js/velocity.min.js"></script>
    <script src="js/functions.js"></script>
    <script src="js/pw_strenght.js"></script>

    <script src="js/registration_func.js"></script>
    <script>
        function getVals(input, fieldName) {
            // Store the value in the summary section
            var summaryId = fieldName + "_summary";
            var summarySpan = document.getElementById(summaryId);
            if (summarySpan) {
                if (input.type === 'checkbox') {
                    // For checkboxes, gather all checked values
                    var checkedValues = [];
                    var checkboxes = document.querySelectorAll('input[name="' + input.name + '"]:checked');
                    checkboxes.forEach(function (checkbox) {
                        checkedValues.push(checkbox.value);
                    });
                    summarySpan.textContent = checkedValues.join(', ');
                } else if (input.type === 'file') {
                    // For file inputs, display the filename
                    summarySpan.textContent = input.files[0] ? input.files[0].name : 'No file chosen';
                } else {
                    // For other input types, display the value directly
                    summarySpan.textContent = input.value;
                }
            }
        }

        // Function to update summary section with entered values
        function updateSummary() {
            // Personal details
            document.getElementById("full_name_summary").textContent = document.getElementsByName("full_name")[0].value;
            document.getElementById("date_of_birth_summary").textContent = document.getElementsByName("date_of_birth")[0].value;
            document.getElementById("email_summary").textContent = document.getElementsByName("email")[0].value;
            document.getElementById("nic_no_summary").textContent = document.getElementsByName("nic_no")[0].value;

            // Account details
            document.getElementById("phone_number_summary").textContent = document.getElementsByName("phone_number")[0].value;

            // Additional details
            document.getElementById("residential_address_summary").textContent = document.getElementsByName("residential_address")[0].value;

            // District
            var genderElement = document.getElementsByName("gender")[0];
            var gender = genderElement.options[genderElement.selectedIndex].value;
            var genderText = genderElement.options[genderElement.selectedIndex].text;
            document.getElementById("gender_summary").textContent = genderText;


            // Update summary when input fields change
            document.querySelectorAll('input[type="text"], input[type="email"], input[type="date"], select, input[type="checkbox"], input[type="radio"], textarea').forEach(item => {
                item.addEventListener('change', event => {
                    updateSummary();
                })
            });

            // Initialize summary
            updateSummary();
        }

        // Directly submit the form and redirect to WhatsApp group link
        document.getElementById("myForm").addEventListener("submit", function (event) {
            // Prevent the default form submission behavior
            event.preventDefault();

            // Submit the form
            var formData = new FormData(document.getElementById("myForm"));
            fetch('/submit-form', {
                method: 'POST',
                body: formData
            })
                .then(response => response.json())
                .then(data => {
                    // Check if the response contains the 'redirectTo' property
                    if (data.redirectTo) {
                        // Redirect to the WhatsApp group link after form submission
                        window.location.href = data.redirectTo;
                    } else {
                        console.error('Error: No redirectTo property found in the server response.');
                    }
                })
                .catch(error => {
                    console.error('Error submitting form:', error);
                });
        });
    </script>
</body>

</html>
