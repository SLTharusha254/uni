<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Apply as a University Student - CMTA Intake 2K24">
    <meta name="author" content="W.M. Tharusha Dewmith">
    <title>Apply As A University Student - Ceylon Music Therapy Association - CMTA - LKMTA - 2K24</title>

    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" type="image/x-icon" href="images/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="72x72" href="images/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="114x114" href="images/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="144x144" href="images/apple-touch-icon-144x144-precomposed.png">

    <link href="https://fonts.googleapis.com/css?family=Work+Sans:400,500,600" rel="stylesheet">

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/menu.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/vendors.css" rel="stylesheet">

    <link href="css/custom.css" rel="stylesheet">

    <script src="js/modernizr.js"></script>

</head>

<body>

    <div id="preloader">
        <div data-loader="circle-side"></div>
    </div>
    <div id="loader_form">
        <div data-loader="circle-side-2"></div>
    </div>
    <nav>
        <ul class="cd-primary-nav">
            <li><a href="https://www.cmta.org.lk" class="animated_link">Main Site</a></li>
            <li><a href="https://gallery.lkmta.site" class="animated_link">Gallery</a></li>
            <li><a href="about.html" class="animated_link">About Us</a></li>
            <li><a href="contacts.html" class="animated_link">Contact Us</a></li>
        </ul>
    </nav>

    <div class="container-fluid full-height">
        <div class="row row-height">
            <div class="col-lg-6 content-left">
                <div class="content-left-wrapper">
                    <a href="index.html" id="logo"><img src="images/logo.png" alt="" width="49" height="35"></a>
                    <div id="social">
                        <ul>
                            <li><a href="#0"><i class="bi bi-facebook"></i></a></li>
                            <li><a href="#0"><i class="bi bi-twitter-x"></i></a></li>
                            <li><a href="#0"><i class="bi bi-instagram"></i></a></li>
                            <li><a href="#0"><i class="bi bi-tiktok"></i></a></li>
                        </ul>
                    </div>
                    <div>
                        <figure><img src="images/info_graphic_2.svg" alt="" class="img-fluid"></figure>
                        <h2>Ceylon Music Therapy Association</h2>
                        Welcome to the Ceylon Music Therapy Association! We warmly invite the members of the Rotary Club of Ruhuna 
       University and the medical faculty students to join our vibrant community. Together, let's explore the 
       transformative power of music therapy. CMTA is committed to building a supportive network of professionals, 
       students, and advocates who recognize the profound impact of music on health and well-being.</p>
    <p>By becoming a member, you not only contribute to advancing the field of music therapy in Sri Lanka but also 
       gain opportunities to participate in specialized workshops, research, and initiatives that bridge the gap 
       between music and healthcare. Let's create harmonies that heal, inspire, and bring positive change to our 
       communities.</p>
                        <a href="https://cmta.org.lk/" class="btn_1 rounded" target="_parent">Visit Our Official
                            Website</a>
                        <a href="#start" class="btn_1 rounded mobile_btn">Start Now!</a>
                    </div>
                    <div class="copy">Â© Ceylon Music Therapy Association</div>
                </div>
            </div>
            <div class="col-lg-6 content-right" id="start">
                <div id="wizard_container">
                    <div id="top-wizard">
                        <div id="progressbar"></div>
                    </div>
                    <form id="myForm" action="/submit-form" method="post" enctype="multipart/form-data">
                        <input id="website" name="website" type="text" value="">
                        <div id="middle-wizard">
                            <div class="step">
                                <h3 class="main_question"><strong>1/5</strong>Basic Information</h3>
                                <div class="form-group">
                                    <input type="text" name="full_name" class="form-control required"
                                        placeholder="Full Name" onchange="getVals(this, 'full_name');">
                                </div>
                                <div class="form-group">
                                    <input type="date" name="date_of_birth" class="form-control required"
                                        placeholder="Date of Birth" onchange="getVals(this, 'date_of_birth');">
                                </div>
                                <div class="form-group">
                                    <div class="styled-select clearfix">
                                        <select class="wide required" name="gender" placeholder="Gender"
                                            onchange="getVals(this, 'gender');">
                                            <option value="">Select your gender</option>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <input type="text" name="phone_number" class="form-control required"
                                        placeholder="Phone Number" onchange="getVals(this, 'phone_number');">
                                </div>
                                <div class="form-group">
                                    <input type="email" name="email" class="form-control required"
                                        placeholder="Your Email" onchange="getVals(this, 'email');">
                                </div>
                                <div class="form-group">
                                    <input type="text" name="residential_address" class="form-control required"
                                        placeholder="Residential Address"
                                        onchange="getVals(this, 'residential_address');">
                                </div>
                            </div>
                            <div class="step">
                                <h3 class="main_question"><strong>2/5</strong>Academic Details</h3>
                                <div class="form-group">
                                    <input type="text" name="university_name" class="form-control required"
                                        placeholder="University Name" onchange="getVals(this, 'university_name');">
                                </div>
                                <div class="form-group">
                                    <input type="text" name="faculty_department" class="form-control required"
                                        placeholder="Faculty/Department"
                                        onchange="getVals(this, 'faculty_department');">
                                </div>
                                <div class="form-group">
                                    <input type="text" name="degree_program" class="form-control required"
                                        placeholder="Degree Program and Year of Study"
                                        onchange="getVals(this, 'degree_program');">
                                </div>
                                <div class="form-group">
                                    <input type="text" name="student_id" class="form-control"
                                        placeholder="Student ID (if applicable)" onchange="getVals(this, 'student_id');">
                                </div>
                            </div>
                            <div class="step">
                                <h3 class="main_question"><strong>3/5</strong>Interests and Skills</h3>
                                <div class="form-group">
                                    <label for="interest_reason">Why are you interested in joining CMTA?</label>
                                    <textarea name="interest_reason" class="form-control required" rows="5"
                                        placeholder="Enter your reasons here"
                                        onchange="getVals(this, 'interest_reason');"></textarea>
                                </div>
                                <div class="form-group">
                                    <label>Relevant Skills (select all that apply):</label>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="relevant_skills"
                                                    id="music_therapy_knowledge" value="Music Therapy Knowledge"
                                                    onchange="getVals(this, 'relevant_skills');">
                                                <label class="form-check-label" for="music_therapy_knowledge">
                                                    Music Therapy Knowledge
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="relevant_skills"
                                                    id="event_management" value="Event Management"
                                                    onchange="getVals(this, 'relevant_skills');">
                                                <label class="form-check-label" for="event_management">
                                                    Event Management
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="relevant_skills"
                                                    id="tech_skills" value="Tech Skills"
                                                    onchange="getVals(this, 'relevant_skills');">
                                                <label class="form-check-label" for="tech_skills">
                                                    Tech Skills
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="relevant_skills"
                                                    id="content_creation" value="Content Creation"
                                                    onchange="getVals(this, 'relevant_skills');">
                                                <label class="form-check-label" for="content_creation">
                                                    Content Creation
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="relevant_skills"
                                                    id="other_skills" value="Other" onchange="getVals(this, 'relevant_skills');">
                                                <label class="form-check-label" for="other_skills">
                                                    Other
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="musical_instruments">Do you play any musical instruments? If yes,
                                        specify.</label>
                                    <input type="text" name="musical_instruments" class="form-control"
                                        placeholder="List instruments played"
                                        onchange="getVals(this, 'musical_instruments');">
                                </div>
                                <div class="form-group">
                                    <label for="prior_activities">Any prior volunteering or extracurricular
                                        activities?</label>
                                    <textarea name="prior_activities" class="form-control" rows="3"
                                        placeholder="Describe your experiences"
                                        onchange="getVals(this, 'prior_activities');"></textarea>
                                </div>
                            </div>
                            <div class="step">
                                <h3 class="main_question"><strong>4/5</strong>Availability</h3>
                                <div class="form-group">
                                    <label>Are you available to attend events and meetings?</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="availability" id="yes"
                                            value="Yes" onchange="getVals(this, 'availability');">
                                        <label class="form-check-label" for="yes">
                                            Yes
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="availability" id="no"
                                            value="No" onchange="getVals(this, 'availability');">
                                        <label class="form-check-label" for="no">
                                            No
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="preferred_times">Preferred days and times for volunteering:</label>
                                    <input type="text" name="preferred_times" class="form-control"
                                        placeholder="e.g., Weekdays evenings, weekends"
                                        onchange="getVals(this, 'preferred_times');">
                                </div>
                                <div class="form-group">
                                    <label for="photo">Photo (for identification purposes):</label>
                                    <input type="file" name="photo" class="form-control-file" accept="image/*"
                                        onchange="getVals(this, 'photo');">
                                </div>
                                <div class="form-group">
                                    <label for="resume">Resume or CV (optional):</label>
                                    <input type="file" name="resume" class="form-control-file"
                                        accept=".pdf,.doc,.docx" onchange="getVals(this, 'resume');">
                                </div>
                            </div>
                            <div class="submit step">
                                <h3 class="main_question"><strong>5/5</strong>Consent and Summary</h3>
                                <div class="form-group terms">
                                    <label class="container_check">I agree to abide by CMTAâs policies and
                                        guidelines.
                                        <input type="checkbox" name="consent_policies" value="Yes" class="required"
                                            onchange="getVals(this, 'consent_policies');">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                                <div class="form-group terms">
                                    <label class="container_check">I grant permission to use photos/videos taken
                                        during CMTA events for promotional purposes.
                                        <input type="checkbox" name="consent_photos" value="Yes"
                                            onchange="getVals(this, 'consent_photos');">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="container_check">I hereby submit this application.
                                        <input type="checkbox" name="digital_signature" value="Yes" class="required"
                                            onchange="getVals(this, 'digital_signature');">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                                <div class="summary">
                                    <ul>
                                        <li>
                                            <ul>
                                                <li><label>Full Name</label>: <span
                                                        id="full_name_summary"></span>
                                                </li>
                                                <li><label>Date of Birth</label>: <span
                                                        id="date_of_birth_summary"></span>
                                                </li>
                                                <li><label>Gender</label>: <span id="gender_summary"></span>
                                                </li>
                                                <li><label>Phone Number</label>: <span
                                                        id="phone_number_summary"></span>
                                                </li>
                                                <li><label>Email</label>: <span id="email_summary"></span>
                                                </li>
                                                <li><label>Residential Address</label>: <span
                                                        id="residential_address_summary"></span>
                                                </li>
                                            </ul>
                                        </li>
                                        <li>
                                            <ul>
                                                <li><label>University Name</label>: <span
                                                        id="university_name_summary"></span>
                                                </li>
                                                <li><label>Faculty/Department</label>: <span
                                                        id="faculty_department_summary"></span>
                                                </li>
                                                <li><label>Degree Program</label>: <span
                                                        id="degree_program_summary"></span>
                                                </li>
                                                <li><label>Student ID</label>: <span id="student_id_summary"></span>
                                                </li>
                                            </ul>
                                        </li>
                                        <li>
                                            <ul>
                                                <li><label>Interest Reason</label>: <spanid="interest_reason_summary"></span>
                                                </li>
                                                <li><label>Relevant Skills</label>: <span
                                                        id="relevant_skills_summary"></span>
                                                </li>
                                                <li><label>Musical Instruments</label>: <span
                                                        id="musical_instruments_summary"></span>
                                                </li>
                                                <li><label>Prior Activities</label>: <span
                                                        id="prior_activities_summary"></span>
                                                </li>
                                            </ul>
                                        </li>
                                        <li>
                                            <ul>
                                                <li><label>Availability</label>: <span
                                                        id="availability_summary"></span>
                                                </li>
                                                <li><label>Preferred Times</label>: <span
                                                        id="preferred_times_summary"></span>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div id="bottom-wizard">
                            <button type="button" name="backward" class="backward">Prev</button>
                            <button type="button" name="forward" class="forward">Next</button>
                            <button type="submit" name="process" class="submit" data-bs-toggle="modal"
                                data-bs-target="#successModal">Submit</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="cd-overlay-nav">
        <span></span>
    </div>
    <div class="cd-overlay-content">
        <span></span>
    </div>
    <a href="#0" class="cd-nav-trigger">Menu<span class="cd-icon"></span></a>

   

    <script src="js/jquery-3.7.1.min.js"></script>
    <script src="js/common_scripts.min.js"></script>
    <script src="js/velocity.min.js"></script>
    <script src="js/functions.js"></script>
    <script src="js/pw_strenght.js"></script>

    <script src="js/registration_func.js"></script>
    <script>
        function getVals(input, fieldName) {
            // Store the value in the summary section
            var summaryId = fieldName + "_summary";
            var summarySpan = document.getElementById(summaryId);
            if (summarySpan) {
                if (input.type === 'checkbox') {
                    // For checkboxes, gather all checked values
                    var checkedValues = [];
                    var checkboxes = document.querySelectorAll('input[name="' + input.name + '"]:checked');
                    checkboxes.forEach(function (checkbox) {
                        checkedValues.push(checkbox.value);
                    });
                    summarySpan.textContent = checkedValues.join(', ');
                } else if (input.type === 'file') {
                    // For file inputs, display the filename
                    summarySpan.textContent = input.files[0] ? input.files[0].name : 'No file chosen';
                } else {
                    // For other input types, display the value directly
                    summarySpan.textContent = input.value;
                }
            }
        }

        // Function to update summary section with entered values
        function updateSummary() {
            // Personal details
            document.getElementById("full_name_summary").textContent = document.getElementsByName("full_name")[0].value;
            document.getElementById("date_of_birth_summary").textContent = document.getElementsByName("date_of_birth")[0].value;
            document.getElementById("email_summary").textContent = document.getElementsByName("email")[0].value;

            // Account details
            document.getElementById("phone_number_summary").textContent = document.getElementsByName("phone_number")[0].value;

            // Additional details
            document.getElementById("residential_address_summary").textContent = document.getElementsByName("residential_address")[0].value;

            // District
            var genderElement = document.getElementsByName("gender")[0];
            var gender = genderElement.options[genderElement.selectedIndex].value;
            var genderText = genderElement.options[genderElement.selectedIndex].text;
            document.getElementById("gender_summary").textContent = genderText;

            // University Name
            document.getElementById("university_name_summary").textContent = document.getElementsByName("university_name")[0].value;

            // Faculty/Department
            document.getElementById("faculty_department_summary").textContent = document.getElementsByName("faculty_department")[0].value;

            // Degree Program
            document.getElementById("degree_program_summary").textContent = document.getElementsByName("degree_program")[0].value;

            // Student ID
            document.getElementById("student_id_summary").textContent = document.getElementsByName("student_id")[0].value;

            // Interest Reason
            document.getElementById("interest_reason_summary").textContent = document.getElementsByName("interest_reason")[0].value;

            // Relevant Skills
            var relevantSkills = [];
            var relevantSkillsCheckboxes = document.querySelectorAll('input[name="relevant_skills"]:checked');
            relevantSkillsCheckboxes.forEach(function (checkbox) {
                relevantSkills.push(checkbox.value);
            });
            document.getElementById("relevant_skills_summary").textContent = relevantSkills.join(', ');

            // Musical Instruments
            document.getElementById("musical_instruments_summary").textContent = document.getElementsByName("musical_instruments")[0].value;

            // Prior Activities
            document.getElementById("prior_activities_summary").textContent = document.getElementsByName("prior_activities")[0].value;

            // Availability
            var availabilityRadios = document.querySelectorAll('input[name="availability"]:checked');
            var availability = availabilityRadios.length > 0 ? availabilityRadios[0].value : '';
            document.getElementById("availability_summary").textContent = availability;

            // Preferred Times
            document.getElementById("preferred_times_summary").textContent = document.getElementsByName("preferred_times")[0].value;
        }

        // Update summary when input fields change
        document.querySelectorAll('input[type="text"], input[type="email"], input[type="date"], select, input[type="checkbox"], input[type="radio"], textarea').forEach(item => {
            item.addEventListener('change', event => {
                updateSummary();
            })
        });

        // Initialize summary
        updateSummary();

        // Directly submit the form and redirect to WhatsApp group link
        document.getElementById("myForm").addEventListener("submit", function (event) {
            // Prevent the default form submission behavior
            event.preventDefault();

            // Submit the form
            var formData = new FormData(document.getElementById("myForm"));
            fetch('/submit-form', {
                method: 'POST',
                body: formData
            })
                .then(response => response.json())
                .then(data => {
                    // Check if the response contains the 'redirectTo' property
                    if (data.redirectTo) {
                        // Redirect to the WhatsApp group link after form submission
                        window.location.href = data.redirectTo;
                    } else {
                        console.error('Error: No redirectTo property found in the server response.');
                    }
                })
                .catch(error => {
                    console.error('Error submitting form:', error);
                });
        });
    </script>
</body>
</html>
